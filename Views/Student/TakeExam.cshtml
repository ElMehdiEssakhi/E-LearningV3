@model E_LearningV3.ViewModels.FinalExamViewModel
@using System.Text.Json


<h2>@Model.Title</h2>

@if (TempData["ExamResult"] != null)
{
    <div class="alert alert-info">
        @TempData["ExamResult"]
    </div>
}

@if (Model.ExamPassed == true)
{
    <div class="alert alert-success">
        ✅ You have already completed this exam.
    </div>
}
else
{
    <form asp-action="SubmitExam" method="post">
        <input type="hidden" asp-for="ExamFinalId" />

        @for (int i = 0; i < Model.Questions.Count; i++)
        {
            <div class="mb-3">
                <label class="fw-bold">Q@(i + 1): @Model.Questions[i].QuestionText</label>
                <div>
                    @for (int j = 0; j < Model.Questions[i].Options.Count; j++)
                    {
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="radio"
                                   name="Answers[@i]"
                                   value="@Model.Questions[i].Options[j]"
                                   id="q@i-option@j" />
                            <label class="form-check-label" for="q@i-option@j">
                                @Model.Questions[i].Options[j]
                            </label>
                        </div>
                    }
                </div>
            </div>
        }

        <button type="submit" class="btn btn-primary">Submit Exam</button>
    </form>
}


